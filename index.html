<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fruugo跨境电商产品计价器（网页版）</title>
    <style>
        :root {
            --primary: #2d8cf0;
            --success: #19be6b;
            --warning: #ff9900;
            --danger: #ed4014;
            --ad-color: #722ed1;
            --text: #17233d;
            --border: #dcdee2;
            --bg: #f0f2f5;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Helvetica Neue', Arial, sans-serif;
        }
        body {
            background-color: var(--bg);
            color: var(--text);
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #2d8cf0, #57a3f3);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        .content {
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        .panel {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            padding: 24px;
            border: 1px solid var(--border);
        }
        .panel-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .form-group {
            margin-bottom: 16px;
        }
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        input, select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 4px;
            font-size: 14px;
            transition: all 0.3s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(45,140,240,0.2);
        }
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            width: 100%;
        }
        .btn:hover {
            background: #40a9ff;
        }
        .results {
            margin-top: 16px;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }
        .result-item:last-child {
            border-bottom: none;
        }
        .result-label {
            font-weight: 500;
        }
        .result-value {
            font-weight: 600;
        }
        .profit {
            color: var(--success);
        }
        .loss {
            color: var(--danger);
        }
        .cost {
            color: var(--warning);
        }
        .revenue {
            color: var(--primary);
        }
        .ad-cost {
            color: var(--ad-color);
        }
        .tips {
            background: #f6ffed;
            border-left: 4px solid var(--success);
            padding: 16px;
            margin-top: 24px;
            font-size: 14px;
        }
        .tips.warning {
            background: #fffbe6;
            border-left-color: var(--warning);
        }
        .tips-title {
            font-weight: 500;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .category-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }
        .tag {
            padding: 6px 12px;
            border-radius: 4px;
            background: #f5f5f5;
            color: var(--text);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tag.selected {
            background: var(--primary);
            color: white;
        }
        .tag.warning {
            background: #fff2e8;
            color: #fa541c;
        }
        .highlight {
            font-weight: 600;
        }
        .ad-input-group {
            border-left: 3px solid var(--ad-color);
            padding-left: 12px;
            margin: 20px 0;
        }
        .ad-input-group label {
            color: var(--ad-color);
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 Fruugo跨境电商产品计价器</h1>
            <p>💰 网页专业版 | 含广告成本计算 | 一键部署使用</p>
        </div>
        
        <div class="content">
            <div class="panel">
                <h2 class="panel-title">📊 成本与定价设置</h2>
                
                <div class="form-group">
                    <label for="purchasePrice">采购成本 (人民币)</label>
                    <input type="number" id="purchasePrice" placeholder="例: 58.00" step="0.01" min="0" value="58">
                </div>
                
                <div class="form-group">
                    <label for="domesticShipping">国内运费 (人民币)</label>
                    <input type="number" id="domesticShipping" placeholder="例: 5.00" step="0.01" min="0" value="5">
                </div>
                
                <div class="form-group">
                    <label for="weight">产品重量 (kg)</label>
                    <input type="number" id="weight" placeholder="例: 0.5" step="0.01" min="0" value="0.5">
                </div>
                
                <div class="form-group">
                    <label for="customsTaxRate">关税税率 (%)</label>
                    <input type="number" id="customsTaxRate" placeholder="例: 15" step="0.1" min="0" max="100" value="15">
                </div>
                
                <div class="form-group">
                    <label for="productCategory">产品类目</label>
                    <select id="productCategory">
                        <option value="home">家居用品 (12%)</option>
                        <option value="motherBaby">母婴用品 (10%)</option>
                        <option value="outdoor">户外休闲 (9%)</option>
                        <option value="health">健康个护 (13%)</option>
                        <option value="pet">宠物用品 (8%)</option>
                        <option value="3c">3C电子 (15%)</option>
                        <option value="clothing">服装 (12%)</option>
                        <option value="beauty">美妆 (13%)</option>
                        <option value="adult">成人用品 (20%) ⚠️</option>
                    </select>
                    <div class="category-tags">
                        <div class="tag selected">家居 12%</div>
                        <div class="tag">母婴 10%</div>
                        <div class="tag">户外 9%</div>
                        <div class="tag">健康 13%</div>
                        <div class="tag">宠物 8%</div>
                        <div class="tag">3C 15%</div>
                        <div class="tag">服装 12%</div>
                        <div class="tag">美妆 13%</div>
                        <div class="tag warning">成人 20% ⚠️</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="targetProfitMargin">目标利润率 (%)</label>
                    <input type="number" id="targetProfitMargin" placeholder="例: 45" step="0.1" min="0" max="100" value="45">
                </div>
                
                <div class="form-group">
                    <label for="shippingFee">国际运费 (英镑)</label>
                    <input type="number" id="shippingFee" placeholder="例: 3.50" step="0.01" min="0" value="3.5">
                </div>
                
                <div class="form-group">
                    <label for="exchangeRate">英镑兑人民币汇率</label>
                    <input type="number" id="exchangeRate" placeholder="例: 9.2" step="0.01" min="0" value="9.2">
                </div>
                
                <!-- 广告成本设置 -->
                <div class="ad-input-group">
                    <label for="adPercentage">广告成本比例 (%)</label>
                    <input type="number" id="adPercentage" placeholder="例: 15" step="0.1" min="0" max="100" value="15">
                </div>
                
                <button class="btn" id="calculateBtn">计算利润</button>
            </div>
            
            <div class="panel">
                <h2 class="panel-title">📈 利润分析报告</h2>
                
                <div class="results">
                    <div class="result-item">
                        <span class="result-label">总成本 (人民币)</span>
                        <span class="result-value cost" id="totalCostCny">¥0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">建议售价 (英镑)</span>
                        <span class="result-value revenue" id="suggestedPrice">£0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">平台佣金 (英镑)</span>
                        <span class="result-value cost" id="platformFee">£0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">国际运费 (英镑)</span>
                        <span class="result-value cost" id="internationalShipping">£0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">关税成本 (英镑)</span>
                        <span class="result-value cost" id="customsTax">£0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">广告成本 (英镑)</span>
                        <span class="result-value ad-cost" id="adCost">£0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">净收入 (英镑)</span>
                        <span class="result-value revenue" id="netIncome">£0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">预估利润 (英镑)</span>
                        <span class="result-value" id="estimatedProfit">£0.00</span>
                    </div>
                    
                    <div class="result-item">
                        <span class="result-label">实际利润率</span>
                        <span class="result-value" id="actualMargin">0%</span>
                    </div>
                </div>
                
                <div class="tips">
                    <div class="tips-title">💡 运营建议</div>
                    <p>• 家居、母婴、户外类目在Fruugo平台流量占比超<span class="highlight">70%</span>，建议优先考虑</p>
                    <p>• 确保产品符合目标市场认证要求（欧盟CE、英国UKCA、澳洲AANZFTA）</p>
                    <p>• 重量控制在<span class="highlight">3kg以内</span>以降低物流成本</p>
                    <p>• 广告预算建议控制在销售额的<span class="highlight">10-20%</span>范围内</p>
                </div>
                
                <div class="tips warning">
                    <div class="tips-title">⚠️ 风险提示</div>
                    <p>• 避免高物流成本、强本地认证和易禁运品类</p>
                    <p>• 成人用品佣金高达<span class="highlight">20%</span>，且风险较大</p>
                    <p>• 广告成本过高会导致利润率大幅下降</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 类目佣金率配置
        const categoryCommissions = {
            'home': 0.12,
            'motherBaby': 0.10,
            'outdoor': 0.09,
            'health': 0.13,
            'pet': 0.08,
            '3c': 0.15,
            'clothing': 0.12,
            'beauty': 0.13,
            'adult': 0.20
        };

        // 类目中文名称
        const categoryNames = {
            'home': '家居用品',
            'motherBaby': '母婴用品',
            'outdoor': '户外休闲',
            'health': '健康个护',
            'pet': '宠物用品',
            '3c': '3C电子',
            'clothing': '服装',
            'beauty': '美妆',
            'adult': '成人用品'
        };

        // 监听类目选择变化
        document.getElementById('productCategory').addEventListener('change', function() {
            updateCategoryTags(this.value);
        });

        // 更新类目标签
        function updateCategoryTags(selectedValue) {
            document.querySelectorAll('.tag').forEach(tag => {
                tag.classList.remove('selected', 'warning');
                
                const categoryText = categoryNames[selectedValue] + ' ' + (categoryCommissions[selectedValue] * 100) + '%';
                if (tag.textContent === categoryText || 
                    (selectedValue === 'adult' && tag.textContent === '成人 20% ⚠️')) {
                    tag.classList.add('selected');
                    if (selectedValue === 'adult') {
                        tag.classList.add('warning');
                    }
                }
            });
        }

        // 标签点击事件
        document.querySelectorAll('.tag').forEach(tag => {
            tag.addEventListener('click', function() {
                const text = this.textContent;
                const categoryMap = {
                    '家居 12%': 'home',
                    '母婴 10%': 'motherBaby',
                    '户外 9%': 'outdoor',
                    '健康 13%': 'health',
                    '宠物 8%': 'pet',
                    '3C 15%': '3c',
                    '服装 12%': 'clothing',
                    '美妆 13%': 'beauty',
                    '成人 20% ⚠️': 'adult'
                };
                
                if (categoryMap[text]) {
                    document.getElementById('productCategory').value = categoryMap[text];
                    updateCategoryTags(categoryMap[text]);
                }
            });
        });

        // 计算按钮点击事件
        document.getElementById('calculateBtn').addEventListener('click', calculateProfit);

        // 页面加载时执行一次计算
        window.addEventListener('load', function() {
            updateCategoryTags(document.getElementById('productCategory').value);
            calculateProfit();
        });

        // 主计算函数
        function calculateProfit() {
            // 获取输入值
            const purchasePrice = parseFloat(document.getElementById('purchasePrice').value) || 0;
            const domesticShipping = parseFloat(document.getElementById('domesticShipping').value) || 0;
            const customsTaxRate = parseFloat(document.getElementById('customsTaxRate').value) || 0;
            const productCategory = document.getElementById('productCategory').value;
            const targetProfitMargin = parseFloat(document.getElementById('targetProfitMargin').value) || 0;
            const shippingFee = parseFloat(document.getElementById('shippingFee').value) || 0;
            const exchangeRate = parseFloat(document.getElementById('exchangeRate').value) || 1;
            const adPercentage = parseFloat(document.getElementById('adPercentage').value) || 0;

            const commissionRate = categoryCommissions[productCategory] || 0.12;

            // 计算关税（人民币）
            const customsTaxCny = (purchasePrice + domesticShipping) * (customsTaxRate / 100);
            
            // 转换为英镑
            const customsTaxGbp = customsTaxCny / exchangeRate;
            
            // 总成本（人民币）
            const totalCostCny = purchasePrice + domesticShipping + customsTaxCny;
            
            // 转换为英镑
            const totalCostGbp = totalCostCny / exchangeRate;
            const totalCostWithShippingGbp = totalCostGbp + shippingFee;

            // 计算建议售价（包含目标利润率）
            const suggestedPriceGbp = totalCostWithShippingGbp / (1 - (targetProfitMargin / 100) - commissionRate - (adPercentage / 100));

            // 计算平台佣金
            const platformFeeGbp = suggestedPriceGbp * commissionRate;

            // 计算广告成本
            const adCostGbp = suggestedPriceGbp * (adPercentage / 100);

            // 计算净收入（英镑）
            const netIncomeGbp = suggestedPriceGbp - platformFeeGbp - totalCostGbp - adCostGbp;

            // 计算实际利润（英镑）
            const actualProfitGbp = suggestedPriceGbp - totalCostWithShippingGbp - platformFeeGbp - adCostGbp;

            // 计算实际利润率
            const actualProfitMargin = totalCostWithShippingGbp > 0 ? 
                (actualProfitGbp / totalCostWithShippingGbp) * 100 : 0;

            // 更新显示结果
            updateResults({
                totalCostCny,
                suggestedPriceGbp,
                platformFeeGbp,
                shippingFee,
                customsTaxGbp,
                adCostGbp,
                netIncomeGbp,
                actualProfitGbp,
                actualProfitMargin
            });
        }

        // 更新结果显示
        function updateResults(data) {
            // 基础数据显示
            document.getElementById('totalCostCny').textContent = `¥${data.totalCostCny.toFixed(2)}`;
            document.getElementById('suggestedPrice').textContent = `£${data.suggestedPriceGbp.toFixed(2)}`;
            document.getElementById('platformFee').textContent = `£${data.platformFeeGbp.toFixed(2)}`;
            document.getElementById('internationalShipping').textContent = `£${data.shippingFee.toFixed(2)}`;
            document.getElementById('customsTax').textContent = `£${data.customsTaxGbp.toFixed(2)}`;
            document.getElementById('adCost').textContent = `£${data.adCostGbp.toFixed(2)}`;
            document.getElementById('netIncome').textContent = `£${data.netIncomeGbp.toFixed(2)}`;
            
            // 利润显示（带颜色）
            const profitElement = document.getElementById('estimatedProfit');
            const marginElement = document.getElementById('actualMargin');
            
            if (data.actualProfitGbp >= 0) {
                profitElement.textContent = `£${data.actualProfitGbp.toFixed(2)}`;
                profitElement.className = 'result-value profit';
                marginElement.textContent = `${data.actualProfitMargin.toFixed(1)}%`;
                marginElement.className = 'result-value profit';
            } else {
                profitElement.textContent = `-£${Math.abs(data.actualProfitGbp).toFixed(2)}`;
                profitElement.className = 'result-value loss';
                marginElement.textContent = `${data.actualProfitMargin.toFixed(1)}%`;
                marginElement.className = 'result-value loss';
            }
        }
    </script>
</body>
</html>
